<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/game_select.css">

    <script src="js/i18n.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/global.js"></script>

    <meta charset="UTF-8">
    <meta name="application-name" data-i18n="application-name" data-i18n-field="content" content="Borne Port Calais">
    <meta name="author" content="Joshua VandaÃ«le">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <header>
        <img src="img/logout.svg" id="logout" onclick="redirectToPage(event, 'index.html')">
        <div id="flags">
            <img src="img/fr-flag.svg" onclick="setLocale('fr'); stopPropagation(event)">
            <img src="img/en-flag.svg" onclick="setLocale('en'); stopPropagation(event)">
        </div>
        <a data-i18n="game_select.attributions" href="attributions.html"></a>
    </header>
    <main>
        <div class="game" onclick="redirectToPage(event, 'jeux/snake/game.html')">
            <img src="img/autorouteferro.jpeg">
            <div class="game-card">
                <h1 data-i18n="game.snake.theme"></h1>
                <div class="game-text">
                    <h2 class="snake-name" data-i18n="game.snake.name"></h2>
                    <p data-i18n="game.snake.description"></p>
                    </p>
                </div>
            </div>
        </div>

        <div class="game" onclick="redirectToPage(event, 'jeux/puzzle/game.html')">
            <img src="img/historiqueport.jpg">
            <div class="game-card">
                <h1 data-i18n="game.puzzle.theme"></h1>
                <div class="game-text">
                    <h2 class="puzzle-name" data-i18n="game.puzzle.name"></h2>
                    <p data-i18n="game.puzzle.description"></p>
                </div>
            </div>
        </div>

        <div class="game" onclick="redirectToPage(event, 'jeux/guesswho/game.html')">
            <img src="img/fonctionnementport.jpeg">
            <div class="game-card">
                <h1 data-i18n="game.guesswho.theme"></h1>
                <div class="game-text">
                    <h2 class="guesswho-name" data-i18n="game.guesswho.name"></h2>
                    <p data-i18n="game.guesswho.description"></p>
                </div>
            </div>
        </div>

        <div class="game" onclick="redirectToPage(event, 'jeux/tetris/game.html')">
            <img src="img/chantierport.jpg">
            <div class="game-card">
                <h1 data-i18n="game.tetris.theme"></h1>
                <div class="game-text">
                    <h2 class="tetris-name" data-i18n="game.tetris.name"></h2>
                    <p data-i18n="game.tetris.description"></p>
                </div>
            </div>
        </div>

        <div class="game" onclick="redirectToPage(event, 'jeux/maze/game.html')">
            <img src="img/lesacteurs.png">
            <div class="game-card">
                <h1 data-i18n="game.maze.theme"></h1>
                <div class="game-text">
                    <h2 class="maze-name" data-i18n="game.maze.name"></h2>
                    <p data-i18n="game.maze.description"></p>
                </div>
            </div>
        </div>

        <div class="game" onclick="chooseBetweenGames(event, 'quiz', '7differences')">
            <img src="img/tourisme.jpg">
            <div class="game-card">
                <h1 data-i18n="game.quiz.theme"></h1>
                <div class="game-text">
                    <h2><span class="quiz-name" data-i18n="game.quiz.name"></span> & <span class="differences-name" data-i18n="game.7differences.name"></span></h2>
                    <p data-i18n="game.quiz.description"></p>
                    <hr>
                    <p data-i18n="game.7differences.description"></p>
                </div>
            </div>
        </div>

        <div class="game" onclick="chooseBetweenGames(event, 'blindtest', 'pacman')">
            <img src="img/environnement.jpg">
            <div class="game-card">
                <h1 data-i18n="game.blindtest.theme"></h1>
                <div class="game-text">
                    <h2><span class="blindtest-name" data-i18n="game.blindtest.name"></span> & <span class="pacman-name" data-i18n="game.pacman.name"></span></h2>
                    <p data-i18n="game.blindtest.description"></p>
                    <hr>
                    <p data-i18n="game.pacman.description"></p>
                </div>
            </div>
        </div>

        <div class="game" onclick="redirectToPage(event, 'jeux/flappybird/game.html')">
            <img src="img/traversemanche.jpg">
            <div class="game-card">
                <h1 data-i18n="game.flappybird.theme"></h1>
                <div class="game-text">
                    <h2 class="flappybird-name" data-i18n="game.flappybird.name"></h2>
                    <p data-i18n="game.flappybird.description"></p>
                </div>
            </div>
        </div>
    </main>


    <div class="modal" id="blindtest-pacman">
        <span class="modal-close"
            onclick="document.getElementById('blindtest-pacman').style.display = 'none'">&times;</span>
        <div class="modal-content">
            <h1 data-i18n="game.blindtest.theme"></h1>
            <div class="modal-buttons">
                <div class="modal-choice" onclick="redirectToPage(event, 'jeux/blindtest/game.html')">
                    <button>
                        <span class="blindtest-name" id="blindtest-modal-button" data-i18n="game.blindtest.name"></span>
                    </button>
                    <p data-i18n="game.blindtest.description"></p>
                </div>
                <div class="modal-choice" onclick="redirectToPage(event, 'jeux/pacman/game.html')">
                    <button>
                        <span class="pacman-name" id="pacman-modal-button" data-i18n="game.pacman.name"></span>
                    </button>
                    <p data-i18n="game.pacman.description"></p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="quiz-7differences">
        <span class="modal-close"
            onclick="document.getElementById('quiz-7differences').style.display = 'none'">&times;</span>
        <div class="modal-content">
            <h1 data-i18n="game.quiz.theme"></h1>
            <div class="modal-buttons">
                <div class="modal-choice" onclick="redirectToPage(event, 'jeux/quiz/game.html')">
                    <button>
                        <span class="quiz-name" id="quiz-modal-button" data-i18n="game.quiz.name"></span>
                    </button>
                    <p data-i18n="game.quiz.description"></p>
                </div>
                <div class="modal-choice" onclick="redirectToPage(event, 'jeux/7differences/game.html')">
                    <button>
                        <span class="differences-name" id="differences-modal-button" data-i18n="game.7differences.name"></span>
                    </button>
                    <p data-i18n="game.7differences.description"></p>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    function onLocaleChange() {
        document.querySelector(`img[src="img/${locale}-flag.svg"]`).id = "selected-language";
        console.log("loaded")
    }

    // Change the id "#selected-language" to the new selected language when an img in the header is clicked
    document.querySelectorAll("img").forEach(img => {
        img.addEventListener("click", function () {
            document.querySelector("#selected-language").removeAttribute("id");
            document.querySelector(`img[src="img/${locale}-flag.svg"]`).id = "selected-language";
        });
    });

    function chooseBetweenGames(event, game1, game2) {
        event.stopPropagation();

        var element = document.getElementById(game1 + "-" + game2);
        if (!element) {
            element = document.getElementById(game2 + "-" + game1);
        }

        element.style.display = "block";
    }
</script>

</html>