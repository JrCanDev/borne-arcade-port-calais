<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/info.css">

    <script src="js/i18n.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/global.js"></script>

    <meta charset="UTF-8">
    <meta name="application-name" data-i18n="application-name" data-i18n-field="content" content="Borne Port Calais">
    <meta name="author" content="Joshua VandaÃ«le">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body onclick="redirectToPage(event, 'game_select.html')">
    <main>
        <h1></h1>

        <div class="img-r card">
            <p></p>
            <img src="img/fallback.svg">
        </div>

        <div class="img-l card">
            <img src="img/fallback.svg">
            <p></p>

        </div>
    </main>

    <script>
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        });

        function setImageSourceWithAvailableExtension(imgElement, basePath, extensions) {
            for (const extension of extensions) {
                const imgPath = basePath + "." + extension;
                const img = new Image();
                img.src = imgPath;
                img.onload = () => {
                    imgElement.src = imgPath;
                }
            }
        }

        function onLocaleChange() {
            document.querySelector('h1').innerHTML = translations["game." + params.game + ".theme"] || translations["translation_not_found_error"];

            document.querySelector('.img-r p').innerHTML = translations["game." + params.game + ".theme.topText"] || translations["translation_not_found_error"];
            setImageSourceWithAvailableExtension(
                document.querySelector('.img-r img'),
                "img/" + params.game + "-top",
                ["jpg", "jpeg", "png", "svg"]
            )

            document.querySelector('.img-l p').innerHTML = translations["game." + params.game + ".theme.bottomText"] || translations["translation_not_found_error"];
            setImageSourceWithAvailableExtension(
                document.querySelector('.img-l img'),
                "img/" + params.game + "-bottom",
                ["jpg", "jpeg", "png", "svg"]
            )

        }
    </script>
</body>

</html>